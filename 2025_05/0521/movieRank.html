<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>

        function showRank() {
            const inputYear = document.getElementById("inputYear").value;
            const inputMonth = document.getElementById("inputMonth").value;
            const inputDay = document.getElementById("inputDay").value;

            const month = inputMonth.padStart(2, '0');
            const day = inputDay.padStart(2, '0');  

            
            let apikey = "xxxxxxxxxxxxxxxxxxxxxxxx";    // ì˜í™”ì§„í¥ìœ„ì›íšŒ ì˜¤í”ˆ APIì—ì„œ ë°œê¸‰ë°›ì€ apií‚¤
            let targetDt = `${inputYear}${month}${day}`;  // ì¶”ì¶œí•  ë‚ ì§œ ì •ë³´
            let method = "get";
            let url = `https://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=${apikey}&targetDt=${targetDt}`;
            
            const xhttp = new XMLHttpRequest();
            xhttp.open(method, url);
            xhttp.send();

            xhttp.onload = function() {
                const movieData = JSON.parse(xhttp.responseText);

                const movieList = movieData.boxOfficeResult.dailyBoxOfficeList;

                let ul = document.getElementById("rankList");
                ul.innerHTML = "";

                let detailDiv = document.getElementById("movieDetail");
                detailDiv.innerHTML = "";

                for(let i=0;i<movieList.length;i++){
                    let li = document.createElement("li");
                    const a = document.createElement("a");
                    a.href = "#";
                    a.textContent = `${movieList[i].rank}ìœ„ - ${movieList[i].movieNm}`;
                    a.style.color = 'black';
                    a.style.cursor = 'pointer';

                    // í´ë¦­ ì‹œ ìƒì„¸ ì •ë³´ ìš”ì²­ ë° ì¶œë ¥
                    a.addEventListener("click", function () {
                        const movieCd = movieList[i].movieCd;
                        const detailUrl = `https://kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieInfo.json?key=${apikey}&movieCd=${movieCd}`;

                        const detailXhttp = new XMLHttpRequest();
                        detailXhttp.open(method, detailUrl);
                        detailXhttp.send();

                        detailXhttp.onload = function () {
                            const detailData = JSON.parse(detailXhttp.responseText);
                            const info = detailData.movieInfoResult.movieInfo;

                            detailDiv.innerHTML = `
                                <h3>ğŸ¬ ${info.movieNm}</h3>
                                <p><strong>ì˜ë¬¸ëª…:</strong></p>
                                <p><strong>ëˆ„ì ê´€ê°ìˆ˜:</strong> ${info.audiAcc}</p>
                                <p><strong>ìƒì˜ì‹œê°„:</strong></p>
                                <p><strong>ê°ë…:</strong></p>
                                <p><strong>ì¶œì—° ë°°ìš°:</strong></p>
                            `;
                            }
                        });

                        li.appendChild(a);
                        ul.appendChild(li);
                }
            }
        }
    </script>
    <style>
        html, body {
            height: 100%;
        }

        body {
            margin: 30px 0;  
        }

        #container {
            width: 100%;
            height: 100%;
            align-content: center;
        }

        header, nav, main, footer {
            margin: 0 auto;
        }

        header {
            height: 70px;
            background-color: rgb(16, 141, 0);
            line-height: 70px;
        }

        nav {
            height: 60px;
            line-height: 60px;
            margin-bottom: 15px;
        }

        main {
            border: 3px solid rgb(16, 141, 0);
            border-radius: 10px;
        }

        main > ul li {
            height: 40px;
            line-height: 40px;
            list-style: none;
            text-align: left;
        }

        footer {
            height: 70px;
            line-height: 70px;
        }

        .common {
            width: 800px;
            text-align: center;
        }

        a {
            color: black;
            font-size: 14px;
            text-decoration: none;
        }

        #title {
            font-size: 30px;
            color: white;
        }
    </style>
</head>
<body>
    <div id="container">
        <header class="common"><a id="title">ì¼ë³„ ë°•ìŠ¤ ì˜¤í”¼ìŠ¤</a></header>
        <nav class="common">
            <input type="text" id="inputYear" size=6><a>ë…„</a>
            <select id="inputMonth">
                <option value="1">1ì›”</option>
                <option value="2">2ì›”</option>
                <option value="3">3ì›”</option>
                <option value="4">4ì›”</option>
                <option value="5">5ì›”</option>
                <option value="6">6ì›”</option>
                <option value="7">7ì›”</option>
                <option value="8">8ì›”</option>
                <option value="9">9ì›”</option>
                <option value="10">10ì›”</option>
                <option value="11">11ì›”</option>
                <option value="12">12ì›”</option>
            </select>
            <select id="inputDay">
                <option value="1">1ì¼</option>
                <option value="2">2ì¼</option>
                <option value="3">3ì¼</option>
                <option value="4">4ì¼</option>
                <option value="5">5ì¼</option>
                <option value="6">6ì¼</option>
                <option value="7">7ì¼</option>
                <option value="8">8ì¼</option>
                <option value="9">9ì¼</option>
                <option value="10">10ì¼</option>
                <option value="11">11ì¼</option>
                <option value="12">12ì¼</option>
                <option value="13">13ì¼</option>
                <option value="14">14ì¼</option>
                <option value="15">15ì¼</option>
                <option value="16">16ì¼</option>
                <option value="17">17ì¼</option>
                <option value="18">18ì¼</option>
                <option value="19">19ì¼</option>
                <option value="20">20ì¼</option>
                <option value="21">21ì¼</option>
                <option value="22">22ì¼</option>
                <option value="23">23ì¼</option>
                <option value="24">24ì¼</option>
                <option value="25">25ì¼</option>
                <option value="26">26ì¼</option>
                <option value="27">27ì¼</option>
                <option value="28">28ì¼</option>
                <option value="29">29ì¼</option>
                <option value="30">30ì¼</option>
                <option value="31">31ì¼</option>
            </select>
            <button onclick="showRank()">í™•ì¸</button>
        </nav>
        <main class="common">
                <ul id="rankList"></ul>
        </main>
        <footer class="common">
            <div id="movieDetail"></div>
        </footer>
    </div>
</body>
</html>
